@using WebMatrix.Data
<!DOCTYPE html>
<html>
<head>
    <title class="text-center text-bg-light ">Wine Reviews</title>
    <style>
        body {
            background-color: cornsilk;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 8px;
            text-align: center;
            background-color: bisque;
        }

        th {
            background-color: bisque;
        }
    </style>
</head>
<body>
    <h1 class="text-bg-warning text-center">Wine Reviews</h1>
    <table>
        <thead>
            <tr>
                <th>Wine Name</th>
                <th>Rating</th>
                <th>Review Title</th>
                <th>Review Text</th>
                <th>Review Date</th>
                <th>Average Rating</th>
                <th>Valuable Reviews Count</th>
            </tr>
        </thead>
        <tbody>
            @{
                var db = Database.Open("wine");
                var reviews = db.Query("SELECT Wine.name AS WineName, Reviews.reviews_rating AS Rating, Reviews.reviews_text AS ReviewText, Reviews.reviews_date AS ReviewDate, Reviews.reviews_title AS ReviewTitle FROM Wine JOIN Reviews ON Wine.name = Reviews.name");

                foreach (var review in reviews)
                {
                    <tr>
                        <td>@review.WineName</td>
                        <td>@review.Rating</td>
                        <td>@review.ReviewTitle</td>
                        <td>@review.ReviewText</td>
                        <td>@review.ReviewDate</td>

                    </tr>
                }
            }
        </tbody>
    </table>
</body>
</html>
